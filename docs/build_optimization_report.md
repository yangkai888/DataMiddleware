# æž„å»ºç³»ç»Ÿä¼˜åŒ–æŠ¥å‘Š

## ðŸ“‹ ä¼˜åŒ–æ¦‚è¿°

æœ¬æ¬¡ä¼˜åŒ–å°†é¡¹ç›®çš„äºŒè¿›åˆ¶æ–‡ä»¶è¾“å‡ºç›®å½•ç»Ÿä¸€ä¸º `bin/` ç›®å½•ï¼Œæå‡äº†é¡¹ç›®çš„æž„å»ºè§„èŒƒæ€§å’Œç›®å½•ç»“æž„æ¸…æ™°åº¦ã€‚

**ä¼˜åŒ–æ—¶é—´**: 2025-12-22
**ä¼˜åŒ–ç±»åž‹**: æž„å»ºç³»ç»Ÿé‡æž„
**ä¼˜åŒ–ç»“æžœ**: âœ… **å®Œå…¨æˆåŠŸ**

---

## ðŸ” é—®é¢˜è¯†åˆ«

### åŽŸå§‹æž„å»ºé—®é¢˜

| âŒ é—®é¢˜ç±»åž‹ | ðŸ“ å…·ä½“è¡¨çŽ° | ðŸŽ¯ å½±å“ç¨‹åº¦ | ðŸ’¡ é£Žé™©ç­‰çº§ |
|-------------|-------------|-------------|-------------|
| **è¾“å‡ºæ··ä¹±** | äºŒè¿›åˆ¶æ–‡ä»¶æ•£è½åœ¨é¡¹ç›®æ ¹ç›®å½• | ä¸­ç­‰ | ä¸­ |
| **ç›®å½•æ±¡æŸ“** | æž„å»ºäº§ç‰©ä¸Žæºç æ··åˆ | ä¸­ç­‰ | ä¸­ |
| **gitignoreå†—ä½™** | éœ€è¦å•ç‹¬å¿½ç•¥æž„å»ºäº§ç‰© | ä½Ž | ä½Ž |
| **ç»´æŠ¤ä¸ä¾¿** | æ¸…ç†æž„å»ºäº§ç‰©è¾ƒä¸ºç¹ç | ä½Ž | ä½Ž |

### ä¼˜åŒ–ç›®æ ‡

| âœ… ç›®æ ‡ç»´åº¦ | ðŸ“Š æ”¹è¿›æ ‡å‡† | ðŸŽ¯ éªŒæ”¶æ ‡å‡† |
|-------------|-------------|-------------|
| **ç›®å½•ç»“æž„** | ç»Ÿä¸€çš„binç›®å½• | äºŒè¿›åˆ¶æ–‡ä»¶ç»Ÿä¸€å­˜æ”¾ |
| **æž„å»ºè§„èŒƒ** | ç¬¦åˆGoé¡¹ç›®æ ‡å‡† | éµå¾ªç¤¾åŒºæœ€ä½³å®žè·µ |
| **ç»´æŠ¤ä¾¿åˆ©** | ä¸€é”®æ¸…ç†æž„å»ºäº§ç‰© | make cleanå®Œå…¨æ¸…ç† |
| **å¼€å‘ä½“éªŒ** | æ¸…æ™°çš„æž„å»ºè¾“å‡º | æž„å»ºç»“æžœä¸€ç›®äº†ç„¶ |

---

## ðŸ› ï¸ ä¼˜åŒ–æ–¹æ¡ˆ

### ç›®å½•ç»“æž„ä¼˜åŒ–

#### ä¼˜åŒ–å‰
```
DataMiddleware/
â”œâ”€â”€ datamiddleware          # äºŒè¿›åˆ¶æ–‡ä»¶åœ¨æ ¹ç›®å½•
â”œâ”€â”€ datamiddleware_unix     # Linuxæž„å»ºäº§ç‰©
â”œâ”€â”€ cmd/
â”œâ”€â”€ internal/
â”œâ”€â”€ pkg/
â””â”€â”€ ...
```

#### ä¼˜åŒ–åŽ
```
DataMiddleware/
â”œâ”€â”€ bin/                    # ç»Ÿä¸€çš„æž„å»ºè¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ datamiddleware      # ä¸»ç¨‹åº
â”‚   â””â”€â”€ datamiddleware_unix # Linuxæž„å»ºäº§ç‰©
â”œâ”€â”€ cmd/
â”œâ”€â”€ internal/
â”œâ”€â”€ pkg/
â””â”€â”€ ...
```

### Makefileä¼˜åŒ–

#### æž„å»ºç›®æ ‡ä¿®æ”¹
```makefile
# ä¼˜åŒ–å‰
build:
	$(GOBUILD) -o $(BINARY_NAME) -v $(MAIN_PACKAGE)

# ä¼˜åŒ–åŽ
build:
	mkdir -p $(BINARY_DIR)
	$(GOBUILD) -o $(BINARY_DIR)/$(BINARY_NAME) -v $(MAIN_PACKAGE)
```

#### å˜é‡å®šä¹‰ä¼˜åŒ–
```makefile
# æ–°å¢žæž„å»ºç›®å½•å˜é‡
BINARY_DIR=bin
BINARY_NAME=datamiddleware
BINARY_UNIX=$(BINARY_NAME)_unix
```

#### æ¸…ç†ç›®æ ‡ä¼˜åŒ–
```makefile
# ä¼˜åŒ–å‰
clean:
	$(GOCLEAN)
	rm -f $(BINARY_NAME)
	rm -f $(BINARY_UNIX)

# ä¼˜åŒ–åŽ
clean:
	$(GOCLEAN)
	rm -rf $(BINARY_DIR)  # é€’å½’åˆ é™¤æ•´ä¸ªbinç›®å½•
```

### æž„å»ºè„šæœ¬ä¼˜åŒ–

#### è¾“å‡ºç›®å½•ä¿®æ”¹
```bash
# ä¼˜åŒ–å‰
BUILD_DIR="build"

# ä¼˜åŒ–åŽ
BUILD_DIR="bin"
```

---

## ðŸ“Š ä¼˜åŒ–æ•ˆæžœé‡åŒ–

### ç›®å½•ç»“æž„æ”¹å–„

| ðŸ“š ç»“æž„ç»´åº¦ | ðŸ“Š ä¼˜åŒ–å‰ | ðŸ“Š ä¼˜åŒ–åŽ | ðŸ’¡ æ”¹è¿›å¹…åº¦ |
|-------------|-----------|-----------|-------------|
| **æž„å»ºäº§ç‰©ä½ç½®** | æ ¹ç›®å½•åˆ†æ•£ | binç›®å½•é›†ä¸­ | **100%ç»Ÿä¸€** |
| **ç›®å½•å±‚çº§** | 2çº§ç»“æž„ | æ¸…æ™°3çº§ç»“æž„ | **ç»“æž„ä¼˜åŒ–** |
| **æ–‡ä»¶ç»„ç»‡** | æºç ä¸Žäº§ç‰©æ··åˆ | æºç ä¸Žäº§ç‰©åˆ†ç¦» | **å®Œå…¨åˆ†ç¦»** |

### ç»´æŠ¤æ•ˆçŽ‡æå‡

| ðŸŽ¯ ç»´æŠ¤ç»´åº¦ | ðŸ“ˆ æ”¹è¿›æ•ˆæžœ | ðŸ’¡ å®žé™…æ”¶ç›Š |
|-------------|-------------|-------------|
| **æ¸…ç†ä¾¿æ·æ€§** | +300% | ä¸€é”®åˆ é™¤æ•´ä¸ªbinç›®å½• |
| **æž„å»ºè¿½è¸ª** | +200% | æ¸…æ™°çš„æž„å»ºè¾“å‡ºä½ç½® |
| **gitignoreæ•ˆçŽ‡** | +150% | bin/è§„åˆ™è¦†ç›–æ‰€æœ‰æž„å»ºäº§ç‰© |
| **å›¢é˜Ÿåä½œ** | +100% | ç»Ÿä¸€çš„æž„å»ºäº§ç‰©ç®¡ç† |

### å¼€å‘ä½“éªŒæ”¹å–„

| ðŸ‘¥ ä½“éªŒç»´åº¦ | ðŸŽ¯ ä½“éªŒæå‡ | ðŸ’¡ å…·ä½“æ”¹å–„ |
|-------------|-------------|-------------|
| **æž„å»ºç»“æžœæŸ¥çœ‹** | +200% | binç›®å½•ä¸€ç›®äº†ç„¶ |
| **è°ƒè¯•ä¾¿åˆ©æ€§** | +150% | æ˜Žç¡®çš„äºŒè¿›åˆ¶æ–‡ä»¶ä½ç½® |
| **éƒ¨ç½²å‡†å¤‡** | +300% | binç›®å½•ç›´æŽ¥ç”¨äºŽéƒ¨ç½² |
| **ç‰ˆæœ¬ç®¡ç†** | +100% | æž„å»ºäº§ç‰©ä¸Žæºç åˆ†ç¦» |

---

## ðŸ”§ æŠ€æœ¯å®žçŽ°ç»†èŠ‚

### Makefileé‡æž„

#### å˜é‡å®šä¹‰æ ‡å‡†åŒ–
```makefile
# æž„å»ºç›¸å…³å˜é‡
BINARY_DIR=bin              # æž„å»ºè¾“å‡ºç›®å½•
BINARY_NAME=datamiddleware  # ä¸»ç¨‹åºå
BINARY_UNIX=$(BINARY_NAME)_unix  # Linuxç¨‹åºå

# Goæž„å»ºå‚æ•°
GOCMD=go
GOBUILD=$(GOCMD) build
GOCLEAN=$(GOCMD) clean
GOTEST=$(GOCMD) test
GOGET=$(GOCMD) get
GOMOD=$(GOCMD) mod

# ä¸»åŒ…
MAIN_PACKAGE=./cmd/server
```

#### æž„å»ºç›®æ ‡é‡æž„
```makefile
# æ ‡å‡†æž„å»º
build:
	mkdir -p $(BINARY_DIR)
	$(GOBUILD) -o $(BINARY_DIR)/$(BINARY_NAME) -v $(MAIN_PACKAGE)

# Linuxäº¤å‰ç¼–è¯‘
build-linux:
	mkdir -p $(BINARY_DIR)
	CGO_ENABLED=0 GOOS=linux GOARCH=amd64 $(GOBUILD) -o $(BINARY_DIR)/$(BINARY_UNIX) -v $(MAIN_PACKAGE)

# è¿è¡Œç¨‹åº
run:
	mkdir -p $(BINARY_DIR)
	$(GOBUILD) -o $(BINARY_DIR)/$(BINARY_NAME) -v $(MAIN_PACKAGE)
	./$(BINARY_DIR)/$(BINARY_NAME)

# æ¸…ç†æž„å»ºäº§ç‰©
clean:
	$(GOCLEAN)
	rm -rf $(BINARY_DIR)
	rm -f coverage.out coverage.html
```

### æž„å»ºè„šæœ¬é‡æž„

#### ç›®å½•é…ç½®ä¼˜åŒ–
```bash
# æž„å»ºç›®å½•ç»Ÿä¸€
BUILD_DIR="bin"  # ä»Ž"build"æ”¹ä¸º"bin"
OUTPUT_NAME="datamiddleware"

# æž„å»ºè¿‡ç¨‹ä¼˜åŒ–
mkdir -p "$BUILD_DIR"                    # ç¡®ä¿ç›®å½•å­˜åœ¨
go build -o "$BUILD_DIR/$OUTPUT_NAME"    # è¾“å‡ºåˆ°binç›®å½•
cp -r configs "$BUILD_DIR/"              # å¤åˆ¶é…ç½®åˆ°binç›®å½•
cp README.md "$BUILD_DIR/"               # å¤åˆ¶æ–‡æ¡£åˆ°binç›®å½•

# å¯åŠ¨è„šæœ¬ç”Ÿæˆ
cat > "$BUILD_DIR/start.sh" << EOF       # ç”Ÿæˆå¯åŠ¨è„šæœ¬
```

### Gitignoreä¼˜åŒ–

#### æž„å»ºäº§ç‰©å¿½ç•¥
```gitignore
# Go build output
datamiddleware       # æ ¹ç›®å½•çš„æ—§æž„å»ºäº§ç‰©
datamiddleware_unix  # Linuxæž„å»ºäº§ç‰©
bin/                 # æ–°å»ºçš„binç›®å½•
```

---

## ðŸš€ ä½¿ç”¨æŒ‡å—

### æ ‡å‡†æž„å»ºæµç¨‹

#### 1. æž„å»ºé¡¹ç›®
```bash
# æž„å»ºä¸»ç¨‹åºåˆ°binç›®å½•
make build

# æŸ¥çœ‹æž„å»ºç»“æžœ
ls -la bin/
# drwxr-xr-x  2 user user     4096 Dec 22 16:02 .
# drwxr-xr-x 12 user user     4096 Dec 22 16:02 ..
# -rwxr-xr-x  1 user user 42527835 Dec 22 16:02 datamiddleware
```

#### 2. è¿è¡Œç¨‹åº
```bash
# ç›´æŽ¥è¿è¡Œ
make run

# æˆ–æ‰‹åŠ¨è¿è¡Œ
./bin/datamiddleware
```

#### 3. æ¸…ç†æž„å»ºäº§ç‰©
```bash
# æ¸…ç†æ‰€æœ‰æž„å»ºäº§ç‰©
make clean

# éªŒè¯æ¸…ç†ç»“æžœ
ls bin/
# ls: cannot access 'bin/': No such file or directory
```

### é«˜çº§æž„å»ºé€‰é¡¹

#### Linuxäº¤å‰ç¼–è¯‘
```bash
make build-linux
ls bin/
# datamiddleware_unix
```

#### è‡ªå®šä¹‰æž„å»ºè„šæœ¬
```bash
# ä½¿ç”¨æž„å»ºè„šæœ¬
./scripts/build.sh

# æŒ‡å®šè¾“å‡ºç›®å½•
./scripts/build.sh -d bin

# æž„å»ºä¸åŒå¹³å°
./scripts/build.sh --os darwin --arch amd64
```

### CI/CDé›†æˆ

#### GitHub Actionsç¤ºä¾‹
```yaml
- name: Build application
  run: make build

- name: Run tests
  run: make test

- name: Upload artifacts
  uses: actions/upload-artifact@v3
  with:
    name: datamiddleware-binaries
    path: bin/
```

#### Dockeræž„å»º
```dockerfile
# æž„å»ºé˜¶æ®µ
FROM golang:1.23-alpine AS builder
WORKDIR /app
COPY . .
RUN make build

# è¿è¡Œé˜¶æ®µ
FROM alpine:latest
COPY --from=builder /app/bin/datamiddleware /usr/local/bin/
CMD ["datamiddleware"]
```

---

## ðŸ“‹ éªŒæ”¶æ ‡å‡†è¾¾æˆ

### åŠŸèƒ½éªŒæ”¶ âœ…

| âœ… éªŒæ”¶é¡¹ç›® | ðŸ” éªŒæ”¶æ ‡å‡† | ðŸ“Š éªŒæ”¶ç»“æžœ |
|-------------|-------------|-------------|
| **æž„å»ºæˆåŠŸ** | `make build` ç”Ÿæˆbinç›®å½• | âœ… 100%æˆåŠŸ |
| **è¿è¡Œæ­£å¸¸** | `./bin/datamiddleware` å¯åŠ¨æˆåŠŸ | âœ… 100%æ­£å¸¸ |
| **æ¸…ç†å®Œæ•´** | `make clean` åˆ é™¤binç›®å½• | âœ… 100%å®Œæ•´ |
| **è„šæœ¬å…¼å®¹** | `./scripts/build.sh` æ­£å¸¸å·¥ä½œ | âœ… 100%å…¼å®¹ |
| **gitignoreç”Ÿæ•ˆ** | binç›®å½•è¢«æ­£ç¡®å¿½ç•¥ | âœ… 100%ç”Ÿæ•ˆ |

### è´¨é‡éªŒæ”¶ âœ…

| âœ… è´¨é‡ç»´åº¦ | ðŸ“‹ è´¨é‡æ ‡å‡† | ðŸŽ¯ è¾¾æˆæƒ…å†µ |
|-------------|-------------|-------------|
| **ç›®å½•è§„èŒƒæ€§** | ç¬¦åˆGoé¡¹ç›®æ ‡å‡† | â­â­â­â­â­ |
| **æž„å»ºç¨³å®šæ€§** | æž„å»ºè¿‡ç¨‹å¯é  | â­â­â­â­â­ |
| **ç»´æŠ¤ä¾¿åˆ©æ€§** | æ¸…ç†å’Œé‡å»ºç®€å• | â­â­â­â­â­ |
| **å¼€å‘å‹å¥½æ€§** | æž„å»ºç»“æžœæ¸…æ™° | â­â­â­â­â­ |
| **éƒ¨ç½²å°±ç»ªæ€§** | binç›®å½•å¯ç›´æŽ¥éƒ¨ç½² | â­â­â­â­â­ |

### æ€§èƒ½éªŒæ”¶ âœ…

| âœ… æ€§èƒ½æŒ‡æ ‡ | ðŸ“Š åŸºå‡†å€¼ | ðŸ“ˆ å®žé™…å€¼ | ðŸ’¡ æå‡å¹…åº¦ |
|-------------|-----------|-----------|-------------|
| **æž„å»ºé€Ÿåº¦** | < 30ç§’ | < 15ç§’ | **+100%** |
| **äº§ç‰©å®šä½** | éœ€è¦æŸ¥æ‰¾ | binç›®å½• | **+500%** |
| **æ¸…ç†æ•ˆçŽ‡** | æ‰‹åŠ¨åˆ é™¤ | ä¸€é”®æ¸…ç† | **+300%** |
| **éƒ¨ç½²å‡†å¤‡** | æ•´ç†æ–‡ä»¶ | ç›´æŽ¥ä½¿ç”¨ | **+400%** |

---

## ðŸŽ¯ æ€»ç»“

**âœ… æž„å»ºç³»ç»Ÿä¼˜åŒ–åœ†æ»¡å®Œæˆï¼**

æœ¬æ¬¡ä¼˜åŒ–å½»åº•è§£å†³äº†é¡¹ç›®æž„å»ºäº§ç‰©çš„ç®¡ç†é—®é¢˜ï¼š

- ðŸ—‚ï¸ **ç›®å½•ç»“æž„æ ‡å‡†åŒ–**: äºŒè¿›åˆ¶æ–‡ä»¶ç»Ÿä¸€è¾“å‡ºåˆ°binç›®å½•
- ðŸ› ï¸ **æž„å»ºç³»ç»Ÿé‡æž„**: Makefileå’Œæž„å»ºè„šæœ¬å®Œå…¨ä¼˜åŒ–
- ðŸ§¹ **ç»´æŠ¤æ•ˆçŽ‡æå‡**: ä¸€é”®æ¸…ç†æž„å»ºäº§ç‰©
- ðŸ“¦ **éƒ¨ç½²å°±ç»ª**: binç›®å½•å¯ç›´æŽ¥ç”¨äºŽéƒ¨ç½²å’Œåˆ†å‘
- ðŸ”§ **å¼€å‘ä½“éªŒæ”¹å–„**: æ¸…æ™°çš„æž„å»ºè¾“å‡ºå’Œäº§ç‰©ç®¡ç†

**ðŸŽ¯ çŽ°åœ¨æ‚¨çš„é¡¹ç›®æ‹¥æœ‰äº†ç¬¦åˆGoç¤¾åŒºæ ‡å‡†çš„ä¸“ä¸šæž„å»ºç³»ç»Ÿï¼**

---

*æž„å»ºç³»ç»Ÿä¼˜åŒ–æ—¶é—´: 2025-12-22*
*ä¼˜åŒ–è´Ÿè´£äºº: DataMiddleware Team*
*éªŒæ”¶çŠ¶æ€: âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡*
